kube-prometheus-stack:
  grafana:
    enabled: false
  windowsMonitoring:
    enabled: false
  alertmanager:
    enabled: false
  kube-state-metrics:
    enabled: true
    image:
      registry: registry.k8s.io
      repository: kube-state-metrics/kube-state-metrics
      tag: "v2.10.1"
  prometheus-node-exporter:
    enabled: true
    image:
      registry: quay.io
      repository: prometheus/node-exporter
      tag: "v1.7.0"
  nameOverride: "k8s-prometheus"
  prometheusOperator:
    enabled: true
    admissionWebhooks:
      patch:
        image:
          registry: registry.k8s.io
          repository: ingress-nginx/kube-webhook-certgen
          tag: v20221220-controller-v1.5.1-58-g787ea74b6
    image:
      registry: quay.io
      repository: prometheus-operator/prometheus-operator
      tag: "v0.72.0"
    prometheusConfigReloader:
      image:
        registry: quay.io
        repository: prometheus-operator/prometheus-config-reloader
        tag: "v0.72.0"
  prometheus:
    prometheusSpec:
      image:
        registry: quay.io
        repository: prometheus/prometheus
        tag: v2.51.0
      podMetadata:
        labels:
          app: k8s-prometheus
          k8s-prometheus: prometheus-server
      storageSpec:
        volumeClaimTemplate:
          spec:
            resources:
              requests:
                storage: 4Gi
      volumes:
        - name: ces-config
          persistentVolumeClaim:
            claimName: k8s-prometheus-config
      containers:
        - name: auth
          image: cloudogu/k8s-prometheus-auth:2.50.1-1
          imagePullPolicy: Always
          env:
            - name: LOG_LEVEL
              value: "INFO"
            - name: PROMETHEUS_URL
              value: "http://localhost:9090"
            - name: WEB_CONFIG_FILE
              value: "/config/web.config.yaml"
            - name: API_KEY
              valueFrom:
                secretKeyRef:
                  name: k8s-prometheus-service-account-api
                  key: apiKey
          ports:
            - name: auth-proxy
              containerPort: 8086
            - name: sa-provider
              containerPort: 8087
          volumeMounts:
            - name: ces-config
              mountPath: /config
